<div class="deleted-items-page">
  <!-- Page header -->
  <div class="page-header">
    <h2 class="page-title">Deleted Items</h2>
    <p class="page-description">
      Manage and restore deleted tasks. Items will be permanently removed after 30 days.
    </p>
  </div>

  <!-- Loading state -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner" aria-label="Loading deleted items"></div>
    <p>Loading deleted items...</p>
  </div>

  <!-- Empty state -->
  <div *ngIf="!isLoading && deletedTasks.length === 0" class="empty-state">
    <div class="empty-state-icon" aria-hidden="true">üóëÔ∏è</div>
    <h3 class="empty-state-title">No deleted items</h3>
    <p class="empty-state-description">
      You don't have any deleted tasks. When you delete tasks, they will appear here.
    </p>
    <button 
      class="btn btn-primary" 
      (click)="navigateToTasks()"
      type="button"
    >
      Go to Tasks
    </button>
  </div>

  <!-- Tasks list -->
  <div *ngIf="!isLoading && deletedTasks.length > 0" class="deleted-tasks-section">
    <!-- Bulk actions toolbar -->
    <div class="bulk-actions-toolbar" *ngIf="deletedTasks.length > 0">
      <div class="selection-controls">
        <button
          class="btn btn-link"
          [disabled]="deletedTasks.length === 0"
          (click)="areAllTasksSelected() ? deselectAllTasks() : selectAllTasks()"
          type="button"
        >
          {{ areAllTasksSelected() ? 'Deselect All' : 'Select All' }}
        </button>
        
        <span *ngIf="hasSelectedTasks()" class="selection-count">
          {{ getSelectedCount() }} of {{ deletedTasks.length }} selected
        </span>
      </div>
      
      <div class="bulk-actions" *ngIf="hasSelectedTasks()">
        <button
          class="btn btn-success"
          (click)="restoreSelectedTasks()"
          type="button"
        >
          Restore Selected ({{ getSelectedCount() }})
        </button>
      </div>
    </div>

    <!-- Tasks list -->
    <div class="deleted-tasks-list">
      <div
        *ngFor="let task of deletedTasks; trackBy: trackByTask"
        class="deleted-task-item"
        [class.selected]="isTaskSelected(task.id)"
      >
        <!-- Selection checkbox -->
        <div class="task-selection">
          <input
            type="checkbox"
            [id]="'task-' + task.id"
            [checked]="isTaskSelected(task.id)"
            (change)="toggleTaskSelection(task.id)"
            [attr.aria-label]="'Select ' + task.title"
          >
        </div>

        <!-- Task details -->
        <div class="task-details">
          <h4 class="task-title">{{ task.title }}</h4>
          <p *ngIf="task.description" class="task-description">
            {{ task.description }}
          </p>
          <div class="task-meta">
            <span class="deleted-date">
              Deleted on {{ formatDate(task.deletedAt) }}
            </span>
            <span *ngIf="task.originalCategory" class="original-category">
              Category: {{ task.originalCategory }}
            </span>
          </div>
        </div>

        <!-- Task actions -->
        <div class="task-actions">
          <button
            class="btn btn-success btn-sm"
            (click)="restoreTask(task.id)"
            [attr.aria-label]="'Restore ' + task.title"
            title="Restore this task"
            type="button"
          >
            Restore
          </button>
          <button
            class="btn btn-danger btn-sm"
            (click)="permanentlyDeleteTask(task.id)"
            [attr.aria-label]="'Permanently delete ' + task.title"
            title="Permanently delete this task"
            type="button"
          >
            Delete Forever
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
